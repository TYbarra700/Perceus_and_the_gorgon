#include <Servo.h>

Servo spin;
Servo head;
Servo medusa;

const int swordLight = 4;
const int shieldLight = 5;
const int forwardLight = 3;

const int swordStart = 12;
const int swordChop = 10;
const int shieldStart = 11;
const int forward = 9;

bool playing, sceneOne, sceneTwo, turnt, chopped;

void setup() {
  
  spin.attach(0);
  head.attach(1);
  medusa.attach(2);

  pinMode(swordLight, OUTPUT);
  digitalWrite(swordLight,LOW);
  pinMode(shieldLight, OUTPUT);
  digitalWrite(shieldLight,LOW);
  pinMode(forwardLight, OUTPUT);
  digitalWrite(forwardLight,LOW);

  pinMode(swordStart, INPUT);
  pinMode(swordChop, INPUT);
  pinMode(shieldStart, INPUT);
  pinMode(forward, INPUT);

  playing = true;
  sceneOne = true;
  sceneTwo = false;
  turnt = false;
  chopped = false;

}

void loop() {
  if (playing == true) {
    if (sceneOne == true) {
      if (digitalRead(swordStart) == HIGH){
        digitalWrite(swordLight, LOW);
      } else {
        digitalWrite(swordLight, HIGH);
      }

      if (digitalRead(shieldStart) == HIGH){
        digitalWrite(shieldLight, LOW);
      } else {
        digitalWrite(shieldLight, HIGH);
      }

        if ((digitalRead(swordStart) == LOW) && (digitalRead(shieldStart) == LOW)) {
          if (digitalRead(forward) == HIGH) {
              digitalWrite(forwardLight, HIGH);
              turnt = true; 
              for(int turn = 0; turn < 180; turn+=1) {
                spin.write(turn);
                delay(10);
              }   
          }
          if (digitalRead(forward) == LOW) {
            if(turnt == false) {
              digitalWrite(forwardLight, HIGH);
              spin.write(0);
            } else {
              spin.write(180);
              digitalWrite(forwardLight, LOW);
              digitalWrite(swordLight, LOW);
              digitalWrite(shieldLight, LOW);
              sceneOne = false;
              sceneTwo = true;
            }
          }
        }
    }

    if (sceneTwo == true) {
      if (turnt == true) {
        if (chopped == false) {
          for(int move = 0; move < 180; move+=1) {
            medusa.write(move);
            }
          if (digitalRead(swordChop) == HIGH) {
              chopped = true;
            }
        } else {
          head.write(170);
          sceneTwo = false;
        }
      } 
    }

    if ((sceneOne == false) && (sceneTwo == false)){
      playing = false;
    }
  }
}  

